// Decompiled by DJ v3.12.12.96 Copyright 2011 Atanas Neshkov  Date: 19-03-2012 10:34:04
// Home Page: http://members.fortunecity.com/neshkov/dj.html  http://www.neshkov.com/dj.html - Check often for new version!
// Decompiler options: packimports(3) 
// Source File Name:   ArtifactCVSUserMgmntAction.java

package cvsMgmnt;

import com.hlcrole.management.HLCBrahmaputraSessionRemote;
import com.hlcrole.management.HLCBrahmaputraSessionRemoteHome;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.rmi.PortableRemoteObject;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.apache.struts.action.*;

public class ArtifactCVSUserMgmntAction extends Action
{

    public ArtifactCVSUserMgmntAction()
    {
        user_name = null;
        password = null;
    }

    public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response)
        throws Exception
    {
        String user_name = request.getParameter("user_name");
        String password = request.getParameter("password");
        System.setProperty("java.naming.factory.initial", "org.jnp.interfaces.NamingContextFactory");
        System.setProperty("java.naming.provider.url", "jnp://");
        Context jndiContext = new InitialContext();
        Object objref = jndiContext.lookup("ejb/MFGBrahmaputraSessionRemoteHome");
        HLCBrahmaputraSessionRemoteHome roleHome = (HLCBrahmaputraSessionRemoteHome)PortableRemoteObject.narrow(objref, HLCBrahmaputraSessionRemoteHome.class);
        HLCBrahmaputraSessionRemote roleRemote = roleHome.create();
        roleRemote.insertCvsUser(user_name, password);
        return mapping.findForward("success");
    }

    String user_name;
    String password;
}
